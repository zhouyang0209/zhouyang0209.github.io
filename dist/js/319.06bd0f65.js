"use strict";(self["webpackChunkvue2_x_event"]=self["webpackChunkvue2_x_event"]||[]).push([[319],{5319:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix header-box",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("文章分类")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addCateBtnFn}},[e._v("添加分类")])],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.cateList,border:"",stripe:""}},[t("el-table-column",{attrs:{label:"序号",width:"100",type:"index"}}),t("el-table-column",{attrs:{label:"分类名称",prop:"cate_name"}}),t("el-table-column",{attrs:{label:"分类别名",prop:"cate_alias"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.updateCateFn(a.row)}}},[e._v("修改")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deleteCateFn(a.row)}}},[e._v("删除")])]}}])})],1)],1),t("el-dialog",{attrs:{title:e.isEdit?"编辑文章分类":"添加文章分类",visible:e.addVisible,width:"35%"},on:{"update:visible":function(t){e.addVisible=t},closed:e.onAddClosedFn}},[t("el-form",{ref:"addRef",attrs:{model:e.addForm,rules:e.addRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"分类名称",prop:"cate_name"}},[t("el-input",{attrs:{minlength:"1",maxlength:"10"},model:{value:e.addForm.cate_name,callback:function(t){e.$set(e.addForm,"cate_name",t)},expression:"addForm.cate_name"}})],1),t("el-form-item",{attrs:{label:"分类别名",prop:"cate_alias"}},[t("el-input",{attrs:{minlength:"1",maxlength:"15"},model:{value:e.addForm.cate_alias,callback:function(t){e.$set(e.addForm,"cate_alias",t)},expression:"addForm.cate_alias"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:e.cancelFn}},[e._v("取 消")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addCateFn}},[e._v("添 加")])],1)],1)],1)},i=[],d=a(7877),r={name:"ArtCate",data(){return{addRules:{cate_name:[{required:!0,message:"请输入分类名称",trigger:"blur"},{pattern:/^\S{1,10}$/,message:"分类名必须是1-10位的非空字符",trigger:"blur"}],cate_alias:[{required:!0,message:"请输入分类别名",trigger:"blur"},{pattern:/^[a-zA-Z0-9]{1,15}$/,message:"分类别名必须是1-15位的字母数字",trigger:"blur"}]},cateList:[],addVisible:!1,addForm:{cate_name:"",cate_alias:""},editId:"",isEdit:!1}},created(){this.getArtCateFn()},methods:{addCateBtnFn(){this.addVisible=!0,this.editId="",this.isEdit=!1},async getArtCateFn(){const e=await(0,d.I2)();if(0!==e.data.code)return this.$message.error(e.data.message);this.cateList=e.data.data},cancelFn(){this.addVisible=!1,this.$refs.addRef.resetFields()},async addCateFn(){this.$refs.addRef.validate((async e=>{if(!e)return!1;if(this.isEdit){this.addForm.id=this.editId,console.log(this.editId);const e=await(0,d.R4)(this.addForm);if(0!==e.data.code)return this.$message.error(e.data.message);this.$message.success("更新分类成功！")}else{const e=await(0,d.pP)(this.addForm);0!==e.data.code&&this.$message.error(e.data.message),this.$message.success("添加分类成功！")}this.getArtCateFn(),this.addVisible=!1}))},onAddClosedFn(){this.$refs.addRef.resetFields()},updateCateFn(e){this.editId=e.id,this.addVisible=!0,this.isEdit=!0,this.$nextTick((()=>{this.addForm.cate_name=e.cate_name,this.addForm.cate_alias=e.cate_alias}))},async deleteCateFn(e){const t=await(0,d.MX)(e.id);if(0!==t.data.code)return this.$message.error(t.data.error.message);this.$message.success("删除分类成功！"),this.getArtCateFn()}}},l=r,n=a(1001),o=(0,n.Z)(l,s,i,!1,null,"0c25d330",null),c=o.exports}}]);
//# sourceMappingURL=319.06bd0f65.js.map